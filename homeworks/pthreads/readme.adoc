= Transferencia de calor
:experimental:
:nofooter:
:source-highlighter: pygments
:sectnums:
:stem: latexmath
:toc:
:xrefstyle: short


[[problem_statement]]
== Problem statement

== Problem statement

Se necesita una simulaciÃ³n para encontrar el momento de equilibrio tÃ©rmico de una lÃ¡mina rectangular con calor constante en sus bordes. La lÃ¡mina es dividida en ğ‘… filas y ğ¶ columnas de igual alto y ancho â„. Cada celda almacena una temperatura que cambia en el tiempo. La simulaciÃ³n sigue la siguiente fÃ³rmula para actualizar la temperatura de cada celda:

image::images/formula.png[width=400]

El calor se transfiere desde las celdas mÃ¡s calientes hacia las mÃ¡s frÃ­as, considerando las vecinas adyacentes. La transferencia depende del Ã¡rea â„Â², el tiempo Î”ğ‘¡ y la difusividad tÃ©rmica Î± del material. La simulaciÃ³n se detiene cuando el cambio de temperatura en todas las celdas internas es menor a un valor Îµ, indicando que se ha alcanzado el equilibrio tÃ©rmico.

=== SimulaciÃ³n de calor

La simulaciÃ³n utiliza lÃ¡minas de distintos materiales, como oro con Î±=127ğ‘šğ‘šÂ²/s. Cada lÃ¡mina tiene bordes con temperaturas constantes, y las celdas internas se actualizan a lo largo del tiempo. La simulaciÃ³n continÃºa hasta que se alcanza el equilibrio, momento en el cual el cambio de temperatura entre estados consecutivos es menor que Îµ.

=== Programa de simulaciÃ³n

El programa debe ejecutarse desde la lÃ­nea de comandos con los siguientes argumentos:

- Nombre de un archivo de trabajo (job), obligatorio.
- Cantidad de hilos de ejecuciÃ³n, opcional. Si se omite, se usa la cantidad de CPUs disponibles.

Ejemplo de ejecuciÃ³n:


[source]
----
$ ./heat_simulator job.txt 4
----


El archivo de trabajo contiene varias simulaciones con parÃ¡metros como:

- Nombre del archivo de la lÃ¡mina (binario)
- DuraciÃ³n de cada etapa Î”ğ‘¡
- Difusividad tÃ©rmica Î±
- DimensiÃ³n de las celdas â„
- Sensitividad del equilibrio Îµ

La simulaciÃ³n continÃºa hasta alcanzar el equilibrio tÃ©rmico y genera un reporte con el nÃºmero de estados ğ‘˜ y el tiempo transcurrido.

=== Archivo de reporte

El reporte tiene el siguiente formato:

[source]
----
plate001.bin 1200 127 1000 2 2 0000/00/00 00:40:00 plate001.bin 1200 127 1000 1.5 3 0000/00/00 01:00:00
----


El reporte incluye el nÃºmero de estados ğ‘˜ y el tiempo en formato `YYYY/MM/DD hh:mm:ss`.

=== Archivo de lÃ¡mina

El archivo de lÃ¡mina es binario, con los primeros 8 bytes indicando la cantidad de filas ğ‘…, los siguientes 8 bytes indicando las columnas ğ¶, seguidos por ğ‘…â‹…ğ¶ valores flotantes que representan las temperaturas iniciales de cada celda. La simulaciÃ³n usa los valores en little-endian y actualiza la matriz hasta el punto de equilibrio.

=== DiseÃ±o concurrente
EL programa deberÃ¡ recibir la cantidad de hilos de ejecuciÃ³n y dividir el trabajo de tal manera que cada hilo tenga una carga de trabajo similar. Esta soluciÃ³n deberÃ¡ ser implementada utilizando la librerÃ­a pthreads.
[[design]]
== Design of solution
image::images/solution.svg[width=700]


[[user_manual]]
== User manual

[[build]]
=== Build

Before compile make sure that you are in Linux environment (Debian is recommended). To compile the project, run the following commands:

[source][bash]
----
$ make clean 
$ make
----


[[usage]]
=== Usage

For usage just execute the following command:

[source][bash]
----
$ bin/pthreads --help
----

That will show how to use the program.

== Testing

For run the tests cases, execute the following commands:

[source][bash]
----
$ make instdeps
----

That will install the dependencies needed for the tests. Such as .7z decompressor.

[source][bash]
----
$ make download
----

That will download the test cases using curl.

[source][bash]
----
$ make run_tests
----

That will run the tests cases.
