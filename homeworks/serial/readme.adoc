= Transferencia de Calor
:experimental:
:nofooter:
:source-highlighter: pygments
:sectnums:
:stem: latexmath
:toc:
:xrefstyle: short

== Problem statement

Se requiere una simulación por computadora para encontrar el momento de equilibrio térmico de una lámina rectangular a la que se le inyecta calor constante por su borde. La lámina es un rectángulo de dos dimensiones dividido en 𝑅 filas y 𝐶 columnas, generando una matriz de celdas cuadradas de ancho y alto ℎ.

Cada celda almacena una temperatura que varía con el tiempo según la fórmula de transferencia de energía, que depende de la temperatura de las celdas vecinas y parámetros físicos como la difusividad térmica α, el tiempo Δ𝑡, y el área de las celdas ℎ².

La simulación actualiza las celdas en cada instante 𝑘 hasta alcanzar el equilibrio térmico, definido cuando ningún cambio de temperatura significativo (mayor a ε) ocurre en las celdas internas.

== Simulación de calor

La simulación comienza con un estado inicial (𝑘=0) de la matriz, manteniendo los bordes a temperatura constante. Se actualizan las celdas internas en cada instante 𝑘 hasta alcanzar el equilibrio, lo cual se verifica comparando los cambios de temperatura con un umbral ε.

== Programa de simulación

La simulación se ejecuta desde la línea de comandos:

* `bin/heatsim jobs/job001.txt 16`: Ejecuta la simulación con 16 hilos de ejecución usando las instrucciones de `job001.txt`.

Argumentos:

1. **Archivo de trabajo**: Contiene las simulaciones a realizar.
2. **Cantidad de hilos**: Opcional, usa la cantidad de CPUs disponibles si se omite.
3. **Ruta de archivos**: Opcional, especifica la ruta de entrada de las láminas.

== Archivo de trabajo

Cada línea del archivo de trabajo define una simulación con los siguientes parámetros:

* **Nombre del archivo de lámina**: Ej. `plate001.bin`.
* **Duración de cada etapa Δ𝑡**: En segundos.
* **Difusividad térmica α**: Del material.
* **Dimensión ℎ**: Tamaño de las celdas.
* **Sensitividad ε**: Umbral de equilibrio térmico.

== Archivo de reporte

El reporte de resultados se guarda en un archivo `job###.tsv`, con:

* Estados 𝑘 hasta el equilibrio.
* Tiempo transcurrido en formato `YYYY/MM/DD hh:mm:ss`.

== Archivo de lámina

Archivos binarios con la estructura:

1. Primeros 8 bytes: Número de filas (𝑅).
2. Siguientes 8 bytes: Número de columnas (𝐶).
3. Resto: Temperaturas iniciales de las celdas (doble precisión).

== Referencias
* Becker and Kaus (2016). Excerpt from GEOL557 Numerical Modeling of Earth Systems.
